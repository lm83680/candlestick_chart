# 帮助你更快理解和接手该项目

## 生成FFI
```shell
flutter_rust_bridge_codegen generate
```

## 画布系统
画布系统的实现基于[Flutter Canvas](flutter.dev/development/ui/graphics/canvas)。
绘制区隔离，不受Widget树的build()影响。

画布高度 = 绘制区的高度
画布宽度 = 绘制区的宽度 + (蜡烛宽度 + 蜡烛边距) * 2。
> 这是为了让每根蜡烛都可以残缺的显示在绘制区内，提高交互观感

### 画布缩放系统
当单根蜡烛的宽度将要小于1pt的时候，切换为折线图📈模式。折线图下，当计算到单根蜡烛的宽度将要小雨0.5pt时，禁止缩放


### 画布坐标系统
坐标系：
```dart
（0，0），(width, 0)
 (0, height)，(width, height)
```
第一根蜡烛的起始坐标为（0，y），第二根蜡烛的起始坐标为（蜡烛宽度 + 蜡烛边距，y），第三根蜡烛的起始坐标为（蜡烛宽度 * 2 + 蜡烛边距 * 2，y），以此类推。

### 画布网格

横向网格线（时间线）固定为 6 个。画布移动会驱动rust重新计算时间信息，以此渲染时间文本。

纵向网格线（价格线）无限个，绘制区域内显示的个数由绘制区域高度决定，计算方式为

1. 根据价格范围和密度计算理想网格数量（1-12条之间）
2. 计算网格步长：
   - 将步长规范化为 1、2、5 的倍数，如 1、2、5、10、20、50等
   - 例如：如果理想步长是4.3，会被调整为5；如果是1.2，会被调整为1
3. 从顶部价格开始，按步长递减生成价格线：
   - 自动计算合适的小数位数
   - 确保价格显示美观（避免过多小数位）
   - 计算每个价格对应的y坐标


这样可以保证价格网格线分布均匀且数值易读。

## 指标扩展
该系统有个很强大的能力，你可以
传入任意的 price，他将返回一个基于坐标系统的y
传入任意的 timestamp，他将返回一个基于坐标系统的x，和当前单根蜡烛所占用的宽度

由此在图表上或者图表后，绘制任何你想要的图形。




## 副图系统
TODO

## 补间动画
TODO
